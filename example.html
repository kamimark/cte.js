<!DOCTYPE html>
<html>
<head>
  <script src="cte.debug.js"></script>
  <style>
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <li cte="friend-item">
    <span data="name"></span>&nbsp;<span data="age"></span>
  </li>
  <div cte="person-template">
      <select data="title">
      <option value="mr">Mr</option>
      <option value="mrs">Mrs</option>
      <option value="miss">Miss</option>
    </select>
    <span data="name"></span>
    <br/>
    <label>Age:</label><span data="age" data-type="number"></span>
    <br/>
      <br/>
    <input type="number" data="money" placeholder="money"></input>
    <br/>
    <input type="range" data="age" attrs="age_range" placeholder="age"></input>
    <br/>
    <label>Has license:</label><input type="checkbox" data="has_license"></input>
    <br/>
    <!--ul data="nicknames">
      <li>
        <ul data="this">
          <li><b><span data="this"></span></b></li>
        </ul>
      </li>
    </ul-->
    <ul data="friends" cte-ref="friend-item">

    </ul>
  </div>

  <div cte="basic">
    <h1 data="title"></h1>
    <h2 data="subtitle"></h2>
    <input type="text" data="content.field1" placeholder="field1"></input>
    <input type="text" data="content.field2" placeholder="field2"></input>
    <div cte-ref="person-template" data="person"></div>
    <button id="getObj">Get</button>
    <button id="setObj">Set</button>
  </div>

  <button id="add">Add template</button>
  <button id="show" class="hidden">Show template</button>
  <button id="hide" class="hidden">Hide template</button>

  <div class="container"></div>
  <script>
  /* bad practice
    let dynamic_options = [{value: 'option1', text: 'Option 1'}, {value: 'option2', text: 'Option 2'}, {value: 'option3', text: 'Option 3'}];
    cte.setDynamicOptions("dynamic_options", dynamic_options);
  */
    let object = {
          title: 'title',
          subtitle: 'subtitle',
          content: {'field1': 'Content1', 'field2': 'Content2'},
          age_range: {min: 2, max: 10, step: 1},
          person: {
            title: 'mr',
            name: 'Markos',
            age: 5,
            has_license: true,
            nicknames: ['Power Ranger', 'Captain Planet'],
            friends: [{name: 'John Doe', age:'Unknown'}, {name: 'Jean Doe', age:'25'}],
          }
        };

    document
      .querySelector('#add')
      .addEventListener('click', (e) => {
        const template = cte.newDom('basic', '.container', object);
        template
          .querySelector('#getObj')
          .addEventListener('click', (e) => {
            const object = cte.getObject(template);
            console.log(object);
            alert(JSON.stringify(object));
        });

        template
          .querySelector('#setObj')
          .addEventListener('click', (e) => {
            object = cte.getObject(template);
        });
    });

  </script>
</body>
</html>
